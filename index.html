<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Smart Parking Dashboard</title>

  <!-- Google Font -->
  <link
    href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;700&display=swap"
    rel="stylesheet"
  >

  <link rel="stylesheet" href="style.css">
</head>
<body>

  <!-- ================= LOCATION SELECT MODAL ================= -->
  <div id="locationModal" class="modal">
    <div class="modal-content">
      <h3>Select Parking Location</h3>

      <select id="locationSelect">
        <option value="">-- Choose Location --</option>
        <option value="Sheet1">Santhiram Engineering College</option>
        <option value="Sheet2">City Mall Parking</option>
        <option value="Sheet3">Railway Station Parking</option>
        <option value="Sheet4">Bus Stand Parking</option>
      </select>

      <button onclick="confirmLocation()">Continue</button>
    </div>
  </div>

  <!-- NAVBAR -->
  <nav class="navbar">
    <h1>Smart Parking System</h1>
    <button onclick="loadSlotData()">ðŸ”„ Refresh</button>
  </nav>

  <!-- HERO -->
  <section class="hero">
    <h2>Smart Park</h2>
    <p>IoT Based Â· Real-Time Monitoring</p>
  </section>

  <!-- STATS -->
  <section class="stats">
    <div class="stat green">
      <h3 id="freeCount">--</h3>
      <span>Available Slots</span>
    </div>

    <div class="stat red">
      <h3 id="occupiedCount">--</h3>
      <span>Occupied Slots</span>
    </div>

    <div class="stat orange">
      <h3 id="reservedCount">--</h3>
      <span>Reserved Slots</span>
    </div>
  </section>

  <!-- SLOT GRID -->
  <main id="slots" class="slot-grid"></main>

  <!-- ================= BOOKING MODAL ================= -->
  <div id="bookingModal" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closeBooking()">Ã—</span>

      <h3>Reserve Parking Slot</h3>

      <input
        type="text"
        id="userName"
        placeholder="Your Name"
        required
      >

      <input
        type="time"
        id="reserveTime"
        required
      >

      <button onclick="submitBooking()">Confirm Booking</button>
    </div>
  </div>

  <!-- FOOTER -->
  <footer>
    <p>Smart Parking System</p>
  </footer>

  <script src="script.js"></script>

  <!-- ================= LOCATION SELECTION SCRIPT ================= -->
  <script>
    function getSheetFromURL() {
      const params = new URLSearchParams(window.location.search);
      return params.get("sheet");
    }

    function confirmLocation() {
      const sheet = document.getElementById("locationSelect").value;
      if (!sheet) {
        alert("Please select a location");
        return;
      }
      window.location.href = `index.html?sheet=${sheet}`;
    }

    // Show location modal only if no sheet is selected
    window.onload = () => {
      if (!getSheetFromURL()) {
        document.getElementById("locationModal").style.display = "block";
      }
    };
  </script>

</body>
</html>
